<div class="app-container" [class.app-is-mobile]="isXSScreen">
  <mat-toolbar color="primary" class="app-toolbar">
    <button mat-icon-button (click)="snav.toggle()">
      <mat-icon>menu</mat-icon>
    </button>
    <h1 class="app-title-name">{{'Home.MathExercise' | translate}}</h1>
    <span class="toolbar-spacer"></span>

    <button mat-icon-button *ngIf="!isLoggedIn" (click)="onLogon()" title="Logon" matTooltip="{{'Login.Login' | translate }}">
      <mat-icon>account_box</mat-icon>
    </button>
    <button mat-icon-button *ngIf="isLoggedIn" [matMenuTriggerFor]="matMenuUser">
      <mat-icon>account_box</mat-icon>
    </button>
    <mat-menu #matMenuUser="matMenu" overlapTrigger="false" xPosition="after" yPosition="below">
      <button mat-menu-item disabled>{{titleLogin}}</button>
      <button mat-menu-item (click)="onUserDetail()">
        <mat-icon color="accent">account_circle</mat-icon>
        <span class="title">{{'Nav.UserDetail' | translate}}</span>
      </button>
      <button mat-menu-item (click)="onLogout()">
        <mat-icon color="accent">exit_to_app</mat-icon>
        <span>{{'Login.Logout' | translate}}</span>
      </button>
    </mat-menu>

    <button mat-icon-button mat-button [matMenuTriggerFor]="matMenuLanguage">
      <mat-icon>language</mat-icon>
    </button>
    <mat-menu #matMenuLanguage="matMenu" overlapTrigger="false" xPosition="after" yPosition="below">
      <button mat-menu-item *ngFor="let lang of arLangs" (click)="onLanguageChanged(lang.Value)">
        <mat-icon *ngIf="selectedLanguage === lang.Value">check</mat-icon>
        {{lang.DisplayString | translate}}
      </button>
    </mat-menu>

    <a mat-icon-button href="https://github.com/alvachien/acgallery" aria-label="GitHub Repository">
      <mat-icon>code</mat-icon>
    </a>

    <button mat-icon-button mat-button [matMenuTriggerFor]="matMenuApps">
      <mat-icon>apps</mat-icon>
    </button>
    <mat-menu #matMenuApps="matMenu" overlapTrigger="false" xPosition="after" yPosition="below">
      <button mat-menu-item (click)="onOpenHIH()">H.I.H.</button>
      <button mat-menu-item (click)="onOpenMathExcises()">Math Exercise</button>
      <button mat-menu-item disabled>Photo Gallery</button>
    </mat-menu>
  </mat-toolbar>

  <mat-sidenav-container class="app-sidenav-container" [style.marginTop.px]="isXSScreen ? 56 : 0">
    <mat-sidenav #snav [mode]="sidenavMode" [fixedInViewport]="isXSScreen" fixedTopGap="56">

      <mat-accordion class="sidenav-headers-align">
        <mat-expansion-panel hideToggle="false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>home</mat-icon> {{'Nav.Home' | translate}}</mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <a mat-list-item routerLink="/home" routerLinkActive="active">{{'Nav.Home' | translate}}</a>
          </mat-nav-list>
        </mat-expansion-panel>
        <mat-expansion-panel hideToggle="false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>photo_album</mat-icon>{{'Nav.Album' | translate}}</mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <a mat-list-item routerLink="/album" routerLinkActive="active">{{'Nav.Album' | translate}}</a>
            <a mat-list-item routerLink="/album/create" *ngIf="isLoggedIn" routerLinkActive="active">{{'Nav.AlbumCreate' | translate}}</a>
          </mat-nav-list>
        </mat-expansion-panel>
        <mat-expansion-panel hideToggle="false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>photo</mat-icon>{{'Nav.Photo' | translate}}</mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <a mat-list-item routerLink="/photo" routerLinkActive="active">{{'Nav.Photo' | translate}}</a>
            <a mat-list-item routerLink="/photo/upload" *ngIf="isLoggedIn" routerLinkActive="active">{{'Nav.PhotoUpload' | translate}}</a>
          </mat-nav-list>
        </mat-expansion-panel>
        <mat-expansion-panel hideToggle="false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>info</mat-icon>{{'Nav.About' | translate}}</mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <a mat-list-item routerLink="/about" routerLinkActive="active">{{'Nav.About' | translate}}</a>
            <a mat-list-item routerLink="/credits" routerLinkActive="active">Credits</a>
            <a mat-list-item (click)="onOpenHIH()">H.I.H.</a>
            <a mat-list-item (click)="onOpenMathExcises()">Math Exercise</a>
            <a mat-list-item href="https://www.flickr.com/photos/alvachien" target="_blank">Flickr</a>
            <a mat-list-item href="https://www.facebook.com/alva.chien" target="_blank">Facebook</a>
          </mat-nav-list>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-sidenav>

    <mat-sidenav-content>
      <router-outlet></router-outlet>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>

<mat-sidenav-container class="demo-root" fullscreen>
  <mat-sidenav #start [mode]="sidenavMode" [fixedInViewport]="isXSScreen" fixedTopGap="56">
    <div *ngIf="isLoggedIn" class="card">
      <div class="card-body">
        <h4 class="card-title text-muted">{{titleLogin}}</h4>
        <h6 class="card-subtitle mb-2 text-muted">{{userDisplayAs}}</h6>
        <button (click)="onLogout()" mat-button style="background: #525252;">{{'Home.Logout' | translate}}</button>
      </div>
    </div>

    <mat-nav-list dense>
      <a *ngFor="let navItem of navItems; let i = index" mat-list-item (click)="start.close()" [routerLink]="[navItem.route]">
        {{i}} - {{navItem.name | translate}}
      </a>
    </mat-nav-list>
    <hr />
    <button mat-button (click)="start.close()">{{'Home.CloseButton' | translate}}</button>
  </mat-sidenav>

  <div>
    <mat-toolbar color="primary">
      <button mat-icon-button (click)="start.open()">
        <mat-icon class="md-24">menu</mat-icon>
      </button>

      <div class="me-toolbar">
        <h1>{{'Home.MathExercise' | translate}}</h1>
        <div>
            <button mat-icon-button *ngIf="!isLoggedIn" (click)="onLogon()" title="Logon" matTooltip="{{'Home.Logon' | translate }}"><mat-icon color="accent">account_box</mat-icon></button>
            <button mat-icon-button *ngIf="isLoggedIn" [matMenuTriggerFor]="matMenuUser">
              <mat-icon color="accent">account_box</mat-icon>
            </button>
            <mat-menu #matMenuUser="matMenu" overlapTrigger="false" xPosition="after" yPosition="below">
              <button mat-menu-item disabled>{{titleLogin}}</button>
              <button mat-menu-item (click)="onUserDetail()">
                <mat-icon color="accent">account_circle</mat-icon>
                <span class="title">{{'Home.UserDetail' | translate}}</span>
              </button>
              <button mat-menu-item (click)="onLogout()">
                <mat-icon color="accent">exit_to_app</mat-icon>
                <span>{{'Home.Logout' | translate}}</span>
              </button>
            </mat-menu>
                  
            <button mat-icon-button mat-button [matMenuTriggerFor]="matMenuLanguage"><mat-icon color="accent">language</mat-icon></button>
            <mat-menu #matMenuLanguage="matMenu" overlapTrigger="false" xPosition="after" yPosition="below">
              <button mat-menu-item *ngFor="let lang of availableLanguages" (click)="onLanguageChange(lang.value)">
                <mat-icon *ngIf="selectedLanguage === lang.value">check</mat-icon>
                {{lang.displayas | translate}}
              </button>
            </mat-menu>
  
            <button mat-icon-button (click)="toggleFullscreen()" title="Toggle fullscreen" matTooltip="{{'Home.FullScreen' | translate }}">
              <mat-icon color="accent" class="mat-24">fullscreen</mat-icon>
            </button>
  
            <button mat-icon-button (click)="onOpenGithubRepo()" matTooltip="Github Repo">
              <mat-icon color="accent">code</mat-icon>
            </button>
            
            <button mat-icon-button mat-button [matMenuTriggerFor]="matMenuApps"><mat-icon color="accent">apps</mat-icon></button>
            <mat-menu #matMenuApps="matMenu" overlapTrigger="false" xPosition="after" yPosition="below">
              <button mat-menu-item disabled>{{'Home.MathExercise' | translate}}</button>
              <button mat-menu-item (click)="onOpenHIH()">H.I.H.</button>
              <button mat-menu-item (click)="onOpenPhotoGallery()">Photo Gallery</button>
            </mat-menu>
          </div>
        </div>
    </mat-toolbar>

    <div class="me-content">
      <router-outlet></router-outlet>
    </div>
  </div>
</mat-sidenav-container>
