<div class="app-container" [class.app-is-mobile]="isXSScreen">
  <mat-toolbar color="primary" class="app-toolbar">
    <button mat-icon-button (click)="snav.toggle()">
      <mat-icon>menu</mat-icon>
    </button>
    <h1 class="app-title-name">{{'Home.MathExercise' | translate}}</h1>
    <span class="toolbar-spacer"></span>

    <button mat-icon-button *ngIf="!isLoggedIn" (click)="onLogon()" title="Logon" matTooltip="{{'Home.Logon' | translate }}">
      <mat-icon>account_box</mat-icon>
    </button>
    <button mat-icon-button *ngIf="isLoggedIn" [matMenuTriggerFor]="matMenuUser" matTooltip="{{'Home.UserDetail' | translate }}">
      <mat-icon>account_box</mat-icon>
    </button>
    <mat-menu #matMenuUser="matMenu" overlapTrigger="false" xPosition="after" yPosition="below">
      <button mat-menu-item disabled>{{titleLogin}}</button>
      <button mat-menu-item (click)="onUserDetail()">
        <mat-icon color="accent">account_circle</mat-icon>
        <span class="title">{{'Home.UserDetail' | translate}}</span>
      </button>
      <button mat-menu-item (click)="onLogout()">
        <mat-icon color="accent">exit_to_app</mat-icon>
        <span>{{'Home.Logout' | translate}}</span>
      </button>
    </mat-menu>

    <button mat-icon-button mat-button matTooltip="{{'Home.Language' | translate }}" [matMenuTriggerFor]="matMenuLanguage">
      <mat-icon>language</mat-icon>
    </button>
    <mat-menu #matMenuLanguage="matMenu" overlapTrigger="false" xPosition="after" yPosition="below">
      <button mat-menu-item *ngFor="let lang of availableLanguages" (click)="onLanguageChange(lang.value)">
        <mat-icon *ngIf="selectedLanguage === lang.value">check</mat-icon>
        {{lang.displayas | translate}}
      </button>
    </mat-menu>

    <button mat-icon-button (click)="toggleFullscreen()" title="Toggle fullscreen" matTooltip="{{'Home.FullScreen' | translate }}">
      <mat-icon>fullscreen</mat-icon>
    </button>

    <button mat-icon-button (click)="launchSourceCode()" href="https://github.com/alvachien/mathexercise" aria-label="GitHub Repository">
      <mat-icon>code</mat-icon>
    </button>

    <button mat-icon-button mat-button [matMenuTriggerFor]="matMenuApps">
      <mat-icon>apps</mat-icon>
    </button>

    <mat-menu #matMenuApps="matMenu" overlapTrigger="false" xPosition="after" yPosition="below">
      <button mat-menu-item disabled>{{'Home.MathExercise' | translate}}</button>
      <button mat-menu-item (click)="onOpenHIH()">H.I.H.</button>
      <button mat-menu-item (click)="onOpenPhotoGallery()">Photo Gallery</button>
    </mat-menu>
  </mat-toolbar>

  <mat-sidenav-container class="app-sidenav-container" [style.marginTop.px]="isXSScreen ? 56 : 0">
    <mat-sidenav #snav [mode]="sidenavMode" [fixedInViewport]="isXSScreen" fixedTopGap="56">

      <mat-accordion class="sidenav-headers-align">
        <mat-expansion-panel hideToggle="false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>home</mat-icon> {{'Home.HomePage' | translate}}
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <a *ngFor="let navItem of navItems | navItemFilter: 0" mat-list-item (click)="snav.close()" [routerLink]="[navItem.route]">
              {{navItem.name | translate}}
            </a>
          </mat-nav-list>
        </mat-expansion-panel>
        <mat-expansion-panel hideToggle="false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>school</mat-icon>{{'Home.PrimarySchoolBasicMath' | translate}}
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <a *ngFor="let navItem of navItems | navItemFilter: 1" mat-list-item (click)="snav.close()" [routerLink]="[navItem.route]">
              {{navItem.name | translate}}
            </a>
          </mat-nav-list>
        </mat-expansion-panel>
        <mat-expansion-panel hideToggle="false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>flight_takeoff</mat-icon>{{'Home.PrimarySchoolExtendMath' | translate}}
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <a *ngFor="let navItem of navItems | navItemFilter: 2" mat-list-item (click)="snav.close()" [routerLink]="[navItem.route]">
              {{navItem.name | translate}}
            </a>
          </mat-nav-list>
        </mat-expansion-panel>
        <mat-expansion-panel hideToggle="false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>public</mat-icon>{{'Home.Others' | translate}}
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <a *ngFor="let navItem of navItems | navItemFilter: 10" mat-list-item (click)="snav.close()" [routerLink]="[navItem.route]">
              {{navItem.name | translate}}
            </a>
          </mat-nav-list>
        </mat-expansion-panel>
        <mat-expansion-panel hideToggle="false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>thumb_up_alt</mat-icon>{{'Home.Award' | translate}}
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <a *ngFor="let navItem of navItems | navItemFilter: 4" mat-list-item (click)="snav.close()" [routerLink]="[navItem.route]">
              {{navItem.name | translate}}
            </a>
          </mat-nav-list>
        </mat-expansion-panel>
        <mat-expansion-panel hideToggle="false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>poll</mat-icon>{{'Home.Statistics' | translate}}
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <a *ngFor="let navItem of navItems | navItemFilter: 5" mat-list-item (click)="snav.close()" [routerLink]="[navItem.route]">
              {{navItem.name | translate}}
            </a>
          </mat-nav-list>
        </mat-expansion-panel>
        <mat-expansion-panel hideToggle="false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>info</mat-icon>{{'Home.About' | translate}}
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <a mat-list-item routerLink="/about" routerLinkActive="active">{{'Home.About' | translate}}</a>
          </mat-nav-list>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-sidenav>

    <mat-sidenav-content>
      <div class="me-content">
        <router-outlet></router-outlet>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
